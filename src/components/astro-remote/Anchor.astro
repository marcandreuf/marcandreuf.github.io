---
const { href } = Astro.props;

const EXTERNAL_PROTOCOLS = ['http://', 'https://', '//', 'mailto:', 'tel:'];
const hasHref = typeof href === 'string' && href.length > 0;
const isHash = hasHref && href.startsWith('#');
const isExternalLink =
  hasHref && !isHash && EXTERNAL_PROTOCOLS.some((prefix) => href.startsWith(prefix));

const linkProps = {
  ...(isExternalLink ? { target: '_blank', rel: 'noopener noreferrer' } : {}),
};
---

<a {href} {...linkProps}>
  <slot />
</a>
